<div *ngIf="!isBusy">
  <div class="comparison-blurb">
    <p> 
      These numbers show how excessive Chichester's spending is, relative to all the
      other districts in Delaware county.
    </p>
    <div class="mt-2">
      <form class="border border-info rounded p-3">
        <div>
          Calculating excess cost based on costs of {{currentDistrict.district.name}} School District.
        </div>

        <div class="row">
          <div class="col-md-3">
            <div class="form-group">
              <label for="ChichesterCSP">Chichester - {{currentDistrict.district.name}} CSP</label>
              <input type="text"
                     class="form-control text-right"
                     id="ChichesterCSP"
                     readonly
                     placeholder="" 
                     value="{{currentMetric.calculationValues.chichesterCostPerStudent | number: '1.0-0'}} - {{currentMetric.calculationValues.districtCostPerStudent | number: '1.0-0'}}">
            </div>
          </div>
          <div class="col-1">
            <div class="form-group">
              <label for="DiffOperator2" style="visibility: hidden">Op</label>
              <input type="text" class="form-control form-control-plaintext text-center" id="DiffOperator2" readonly placeholder="" value="=">
            </div>
          </div>
          <div class="col-md-2">
            <div class="form-group">
              <label for="SelectedDistrictCSP">Per Student Savings!</label>
              <input type="text" class="form-control text-right" id="CSPDifference" readonly placeholder="" value="{{currentMetric.calculationValues.DifferenceCostPerStudent | number: '1.0-0'}}">
            </div>
          </div>
        </div>
      </form>  
    </div>  
  </div>
  <table class='table table-striped table-sm'>
    <thead>
    <tr>
      <th></th>
      <th class="text-right text-nowrap" *ngFor="let key of objectKeys(comparisons.fiscalYears)">{{comparisons.fiscalYears[key]}}</th>
    </tr>
    </thead>
    <tbody>
    <ng-template let-district ngFor [ngForOf]="comparisons.districtFiscalYearMetrics">
      <tr [ngClass]="{'highlight-row' : district.district.name === 'Chichester'}">
        <td>{{district.district.name}}</td>
        <td class="text-right" *ngFor="let key of objectKeys(comparisons.fiscalYears)" (click)="setCurrent(district, district.metricsByFiscalYear[key].metrics['ExcessChichesterSpending'])">
          <span>{{district.metricsByFiscalYear[key].metrics['ExcessChichesterSpending'].value | number: '1.0-0'}}</span>
        </td>
      </tr>
    </ng-template>
    </tbody>
  </table>
</div>
